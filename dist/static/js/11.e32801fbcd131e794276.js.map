{"version":3,"sources":["webpack:///src/components/search.vue","webpack:///./src/components/search.vue?2612","webpack:///./src/components/search.vue"],"names":["func","wait","timeout","search","el","mounted","console","log","data","hotList","searchWorld","searchList","showDetail","searchHistory","searchTip","number","tweenedNumber","dNumber","directives","focus","inserted","computed","animatedNumber","this","toFixed","watch","debounceSearch","newValue","TweenLite","to","_this","$data","methods","getData","_this2","$axios","get","then","re","sHistory","localStorage","getItem","split","result","hots","sollorder","detailWrapper","core_esm","$refs","page","click","e","getHot","v","clearTimeout","setTimeout","_this3","songs","$nextTick","scroll","includes","i","indexOf","splice","length","pop","reverse","push","setItem","toText","components_search","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","id","name","rawName","value","expression","style","background","$store","state","zColor","on","$event","showToggle","_v","placeholder","type","domProps","input","target","composing","_e","_l","item","index","key","first","_s","ref","playSong","artists","album","picId","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/11.e32801fbcd131e794276.js","sourcesContent":["<template>\r\n  <transition id=\"search\" name=\"fade\" class=\"wrapper\">\r\n    <div class=\"search\" v-show=\"showDetail\">\r\n      <header class=\"topctrl\" :style=\"{ background: $store.state.zColor }\">\r\n        <div class=\"back\" @click=\"showToggle(1)\">\r\n          <i class=\"fa fa-angle-left fa-2x\"></i>\r\n        </div>\r\n        <input\r\n          v-focus\r\n          class=\"searchInput\"\r\n          v-model=\"searchWorld\"\r\n          placeholder=\"搜索歌曲、歌手\"\r\n          type=\"text\"\r\n        />\r\n        <i\r\n          class=\"el-icon-close back\"\r\n          @click=\"searchWorld = ''\"\r\n          v-if=\"searchWorld != ''\"\r\n        ></i>\r\n      </header>\r\n\r\n      <div class=\"resultsBox addTop\" v-if=\"searchTip\">\r\n        <div class=\"HS-title\">热门搜索</div>\r\n        <div class=\"hotSearchBox\">\r\n          <div\r\n            class=\"cellHS\"\r\n            v-for=\"(item, index) of hotList\"\r\n            :key=\"index\"\r\n            @click=\"searchWorld = item.first\"\r\n          >\r\n            {{ item.first }}\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"resultsBox\" v-if=\"searchTip\">\r\n        <div class=\"HS-title\">搜索历史</div>\r\n        <div class=\"hotSearchBox\">\r\n          <div\r\n            class=\"cellHS\"\r\n            v-for=\"(item, index) of searchHistory\"\r\n            :key=\"index\"\r\n            @click=\"searchWorld = item\"\r\n          >\r\n            {{ item }}\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"scrollBox\" ref=\"page\" v-if=\"searchList.length >= 1\">\r\n        <div class=\"SearchResultsBox\">\r\n          <div\r\n            class=\"SearchResults\"\r\n            v-for=\"(item, index) of searchList\"\r\n            :key=\"index\"\r\n            @click=\"\r\n              playSong(\r\n                item.id,\r\n                item.name,\r\n                item.artists[0].name,\r\n                item.album.picId\r\n              )\r\n            \"\r\n          >\r\n            <div class=\"searchName\">{{ item.name }}</div>\r\n            <div>{{ item.artists[0].name }}</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </transition>\r\n</template>\r\n\r\n<script>\r\nimport BScroll from \"@better-scroll/core\";\r\n\r\nconst debounce = (func, wait) => {\r\n  let timeout = \"\";\r\n  return (v) => {\r\n    if (timeout) {\r\n      clearTimeout(timeout);\r\n    }\r\n    timeout = setTimeout(() => {\r\n      func(v);\r\n    }, wait);\r\n  };\r\n};\r\n\r\nexport default {\r\n  el: \"#animated-number-demo\",\r\n  mounted() {\r\n    console.log(\"search\");\r\n  },\r\n  data() {\r\n    return {\r\n      hotList: [],\r\n      searchWorld: \"\",\r\n      searchList: [],\r\n      showDetail: false,\r\n      searchHistory: [],\r\n      searchTip: true,\r\n      number: 0,\r\n      tweenedNumber: 0,\r\n      dNumber: 0,\r\n    };\r\n  },\r\n  directives: {\r\n    focus: {\r\n      // 指令的定义\r\n      inserted: function (el) {\r\n        el.focus();\r\n      },\r\n    },\r\n  },\r\n  computed: {\r\n    animatedNumber: function () {\r\n      return this.tweenedNumber.toFixed(0);\r\n    },\r\n  },\r\n  watch: {\r\n    searchWorld: function () {\r\n      this.debounceSearch(this);\r\n      this.searchWorld === \"\" ? (this.searchTip = true) : \"\";\r\n    },\r\n    number: (newValue) => {\r\n      TweenLite.to(this.$data, 0.5, { tweenedNumber: newValue });\r\n    },\r\n  },\r\n  methods: {\r\n    getData: function () {\r\n      this.$axios.get(\"/search/hot\").then((re) => {\r\n        var sHistory = localStorage.getItem(\"searchHistory\");\r\n        sHistory == null ? \"\" : (this.searchHistory = sHistory.split(\",\"));\r\n        this.searchWorld = \"\";\r\n        this.hotList = re.data.result.hots;\r\n      });\r\n    },\r\n    sollorder() {\r\n      this.detailWrapper = new BScroll(this.$refs.page, {\r\n        click: true, //开启点击事件 默认为false\r\n      });\r\n    },\r\n    debounceSearch: debounce(function (e) {\r\n      if (e.searchWorld != \"\") {\r\n        e.getHot();\r\n      } else {\r\n        e.searchList = [];\r\n      }\r\n    }, 1000),\r\n    getHot: function () {\r\n      this.$axios.get(\"/search?keywords=\" + this.searchWorld).then((re) => {\r\n        this.searchList = re.data.result.songs;\r\n        this.searchTip = false;\r\n        this.$nextTick(() => {\r\n          //$refs绑定元素\r\n          if (!this.scroll) {\r\n            this.scroll = new BScroll(this.$refs.page, {\r\n              // click:true   //开启点击事件 默认为false\r\n            });\r\n          }\r\n        });\r\n      });\r\n      if (this.searchHistory.includes(this.searchWorld)) {\r\n        var i = this.searchHistory.indexOf(this.searchWorld);\r\n        this.searchHistory.splice(i, 1);\r\n      } else if (this.searchHistory.length >= 5) {\r\n        this.searchHistory.pop();\r\n      }\r\n      this.searchHistory.reverse();\r\n      this.searchHistory.push(this.searchWorld);\r\n      this.searchHistory.reverse();\r\n      localStorage.setItem(\"searchHistory\", this.searchHistory);\r\n    },\r\n    toText: () => {\r\n      //n nnn nn nn\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.fade-enter-active,\r\n.fade-leave-active {\r\n  transition: all 0.2s ease;\r\n  transform: translate3d(0, 0, 0);\r\n}\r\n.fade-enter, .fade-leave-to /* .fade-leave-active below version 2.1.8 */ {\r\n  transition: all 0.4s ease;\r\n  transform: translate3d(100%, 0, 0);\r\n}\r\n#search,\r\n.search {\r\n  width: 100%;\r\n  height: 100%;\r\n  position: fixed;\r\n  top: 0;\r\n  z-index: 50;\r\n  background: #fff;\r\n}\r\n.topctrl {\r\n  display: flex;\r\n  top: 0;\r\n  width: 100%;\r\n  z-index: 100;\r\n  position: fixed;\r\n}\r\n/* .resultsBox:first-child{\r\n  margin-top: 44px;\r\n} */\r\n.searchInput {\r\n  background: transparent;\r\n  border: none;\r\n  border-bottom: 1px solid #dddad3;\r\n  color: #fff;\r\n  border-radius: 0;\r\n  width: calc(100% - 88px);\r\n  height: 28px;\r\n  margin: auto 0;\r\n}\r\n.searchInput::-webkit-input-placeholder {\r\n  color: #fff;\r\n}\r\n.searchInput:focus {\r\n  outline: none;\r\n}\r\n.HS-title {\r\n  text-align: left;\r\n  padding: 10px 0 8px 14px;\r\n  font-size: 12px;\r\n}\r\n.hotSearchBox {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  padding: 0 10px;\r\n}\r\n.cellHS {\r\n  border: 1px solid #f3f3f3;\r\n  border-radius: 50px;\r\n  margin: 4px;\r\n  font-size: 12px;\r\n  padding: 3px 10px;\r\n  background: #f3f3f3;\r\n}\r\n.SearchResultsBox {\r\n}\r\n.SearchResults {\r\n  border-bottom: 1px solid #e4e4e4;\r\n  width: 100%;\r\n  text-align: left;\r\n  height: 40px;\r\n  font-size: 10px;\r\n  line-height: 20px;\r\n  padding: 4px 10px;\r\n}\r\n.searchName {\r\n  width: 100%;\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  font-size: 16px;\r\n}\r\n.scrollBox {\r\n  width: 100vw;\r\n  height: calc(100vh - 44px);\r\n  margin-top: 44px;\r\n  z-index: 80;\r\n}\r\n.addTop {\r\n  margin-top: 44px;\r\n}\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/components/search.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',{staticClass:\"wrapper\",attrs:{\"id\":\"search\",\"name\":\"fade\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showDetail),expression:\"showDetail\"}],staticClass:\"search\"},[_c('header',{staticClass:\"topctrl\",style:({ background: _vm.$store.state.zColor })},[_c('div',{staticClass:\"back\",on:{\"click\":function($event){return _vm.showToggle(1)}}},[_c('i',{staticClass:\"fa fa-angle-left fa-2x\"})]),_vm._v(\" \"),_c('input',{directives:[{name:\"focus\",rawName:\"v-focus\"},{name:\"model\",rawName:\"v-model\",value:(_vm.searchWorld),expression:\"searchWorld\"}],staticClass:\"searchInput\",attrs:{\"placeholder\":\"搜索歌曲、歌手\",\"type\":\"text\"},domProps:{\"value\":(_vm.searchWorld)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.searchWorld=$event.target.value}}}),_vm._v(\" \"),(_vm.searchWorld != '')?_c('i',{staticClass:\"el-icon-close back\",on:{\"click\":function($event){_vm.searchWorld = ''}}}):_vm._e()]),_vm._v(\" \"),(_vm.searchTip)?_c('div',{staticClass:\"resultsBox addTop\"},[_c('div',{staticClass:\"HS-title\"},[_vm._v(\"热门搜索\")]),_vm._v(\" \"),_c('div',{staticClass:\"hotSearchBox\"},_vm._l((_vm.hotList),function(item,index){return _c('div',{key:index,staticClass:\"cellHS\",on:{\"click\":function($event){_vm.searchWorld = item.first}}},[_vm._v(\"\\n          \"+_vm._s(item.first)+\"\\n        \")])}),0)]):_vm._e(),_vm._v(\" \"),(_vm.searchTip)?_c('div',{staticClass:\"resultsBox\"},[_c('div',{staticClass:\"HS-title\"},[_vm._v(\"搜索历史\")]),_vm._v(\" \"),_c('div',{staticClass:\"hotSearchBox\"},_vm._l((_vm.searchHistory),function(item,index){return _c('div',{key:index,staticClass:\"cellHS\",on:{\"click\":function($event){_vm.searchWorld = item}}},[_vm._v(\"\\n          \"+_vm._s(item)+\"\\n        \")])}),0)]):_vm._e(),_vm._v(\" \"),(_vm.searchList.length >= 1)?_c('div',{ref:\"page\",staticClass:\"scrollBox\"},[_c('div',{staticClass:\"SearchResultsBox\"},_vm._l((_vm.searchList),function(item,index){return _c('div',{key:index,staticClass:\"SearchResults\",on:{\"click\":function($event){return _vm.playSong(\n              item.id,\n              item.name,\n              item.artists[0].name,\n              item.album.picId\n            )}}},[_c('div',{staticClass:\"searchName\"},[_vm._v(_vm._s(item.name))]),_vm._v(\" \"),_c('div',[_vm._v(_vm._s(item.artists[0].name))])])}),0)]):_vm._e()])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-25b42b00\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/search.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"./\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-25b42b00\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./search.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./search.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./search.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-25b42b00\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./search.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-25b42b00\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/search.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}